<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;600&display=swap" rel="stylesheet">
    <title>Testing Import</title>
</head>
<style>
    body {
        background-color: #121212;
        color: white;
        font-family: 'Nunito', sans-serif;
    }
    #dropZone {
    background-color: rgba(255, 127, 80, 0.2);
    border:2px dashed coral;
    border-radius: 12px;
    font-weight: 600;
    font-size: 18px;
    padding: 80px;
    z-index: 1;
    backdrop-filter: blur(4px);
}
#dropZone p {
    color: coral;

}
</style>
<body>
    <input type="file" name="file" id="fileUpload" onchange="importFile(this.files)" >
    <div id="dropZone" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
                        
        <p>Drag a file </p>
    </div>
    <script>
        function importFile(files) {
            
        let fileContent = "";
            const fr = new FileReader();
            fr.onload = () => {
            fileContent = JSON.parse(fr.result);
            importCoin(fileContent);
            }
            fr.readAsText(files[0]);
   }
   function importFileFromDrop(file) {
            
            let fileContent = "";
                const fr = new FileReader();
                fr.onloadend = () => {
                fileContent = JSON.parse(fr.result);
                importCoin(fileContent);
                }
                fr.readAsText(file)

       }
        
   function dropHandler(ev) {

  // Impedir o comportamento padrão (impedir que o arquivo seja aberto)
  ev.preventDefault();

  if (ev.dataTransfer.items) {
    // Use a interface DataTransferItemList para acessar o (s) arquivo (s)
    for (var i = 0; i < ev.dataTransfer.items.length; i++) {
      // Se os itens soltos não forem arquivos, rejeite-os
      if (ev.dataTransfer.items[i].kind === 'file') {
        var file = ev.dataTransfer.items[i].getAsFile();
        importFileFromDrop(file)
      }
    }
  }
}

function dragOverHandler(ev) {
  // Impedir o comportamento padrão (impedir que o arquivo seja aberto)
  ev.preventDefault();
}
    </script>
    <script src="src/main.bundle.js"></script>

</body>
</html>